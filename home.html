<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"> 

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="stylesheet" href="css/jquery.loadmask.css" type="text/css" media="all">
<!--  <link rel="stylesheet" href="stylesheets/reset.css" type="text/css" media="screen" />
  <link rel="stylesheet" href="stylesheets/jive.css" type="text/css" media="screen" />
-->
<!--Jive.css-->

<style type="text/css">

textarea.referMsg
{
	height:100px;
}
[type=text], [type="password"], textarea, select { width:300px; padding:5px;}
[type=text], [type="password"], select {height:25px; vertical-align:top; text-align:left;}


a:link, a:visited { color:black}
a:hover {text-decoration:none}

a.viewmore:link, a.viewmore:visited
{
	padding-top: 3px;
	padding-bottom: 3px;
	padding-right: 10px;
	padding-left: 10px;
	
	font-size: 9pt;
	font-weight:bold;
	text-decoration: none;
	color: white;
	background-color: #12378B;
	
	text-align: center;
	-moz-border-radius: 8px;
	-webkit-border-radius: 8px;	
}

a.viewmore:hover
{
background-color: #12378B;
}

#footer{
clear: both;
	height: 28px;
	width: 100%;
	border-width: 1px 0 0 0;
	border-style: solid;
	border-color: #658AC3;
	vertical-align: bottom;
	padding: 0;
	margin: 0;
	position: absolute;
	bottom: 0px;
	font-size: 9px;
	font-weight: bold;
	text-align:center;
	font-family: Verdana, Geneva, Arial, sans-serif;	
} 

/* Jive Style ends */
/*New Home */
* {
  margin: 0;
  padding: 0
}

.container {
  background-color: #12378B;
  width: 380px;
  border: 1px solid #000;
}

* html .container {
  width: 383px;
}

.header {
  width: 100%;
  border-bottom: 1px solid #000;
}

.header ul {
  list-style: none
}

.header ul li {
  width: 90px;
  border-left: 1px solid #000;
  float: left;
  font-weight: bold;
  padding-left: 2px;
}

* html .header ul li {
  width: 93px;
}

.data {
  width: 90px;
  overflow:hidden;
  text-overflow:ellipsis; 
  white-space:nowrap;
  float: left;
  padding-left: 2px;
}

* html .data {
  width: 93px;
}

.rowodd,.roweven {
  position: relative;
  width: 380px;
  border-top: 1px solid #000;
  background-color: #E8E8E8;
}

.roweven {
  background-color: #D1DCE9;
}

.clearfix:after {
  content: ".";
  display: block;
  height: 0;
  clear: both;
  visibility: hidden;
}

.clearfix {
  display: inline-block;
}
/*New Home Ends */

/*Chrom Style - Top Menu */

.chromestyle{
width: 100%;
font-weight: bold;
}

.chromestyle:after{ /*Add margin between menu and rest of content in Firefox*/
content: "."; 
display: block; 
height: 0; 
clear: both; 
visibility: hidden;
}

.chromestyle ul{
border: 1px solid #BBB;
width: 100%;
background: url(../images/chromebg2.gif) center center repeat-x; /*THEME CHANGE HERE*/
padding: 4px 0;
margin: 0;
text-align: center; /*set value to "left", "center", or "right"*/
}

.chromestyle ul li{
display: inline;
}

.chromestyle ul li a{
color: #494949;
padding: 4px 7px;
margin: 0;
text-decoration: none;
border-right: 1px solid #B5E2FE; /*THEME CHANGE HERE*/
}

.chromestyle ul li a:hover, .chromestyle ul li a.selected{ /*script dynamically adds a class of "selected" to the current active menu item*/
background: url(../images/chromebg2-over.gif) center center repeat-x; /*THEME CHANGE HERE*/
}


/* ######### Style for Drop Down Menu ######### */

.dropmenudiv{
position:absolute;
top: 0;
border: 1px solid #B5E2FE; /*THEME CHANGE HERE*/
border-bottom-width: 0;
font:normal 12px Verdana;
line-height:18px;
z-index:100;
background-color: white;
width: 200px;
visibility: hidden;
}

.dropmenudiv a{
width: 100%;
display: block;
text-indent: 3px;
border-bottom: 1px solid #B5E2FE; /*THEME CHANGE HERE*/
padding: 2px 0;
text-decoration: none;
font-weight: bold;
color: black;
}

.dropmenudiv a:hover{ /*THEME CHANGE HERE*/
background-color: #EBF7FF;
}

li#noDiscuss {
	background-image: url(images/discuss_no.png); 
	background-repeat:no-repeat;

     /* width of feed icon plus 2px spacing */background-position:left top;
}
li#Discuss {
	background-image: url(images/discuss_yes.png);background-repeat:no-repeat;

   /* width of feed icon plus 2px spacing */background-position:left top;
}

li#updateDays{
	background-image: url(images/updatedays.png);background-repeat:no-repeat;

     /* width of feed icon plus 2px spacing */background-position:left top;
}

li#updateMins{
	background-image: url(images/updatemins.png);background-repeat:no-repeat;

    /* width of feed icon plus 2px spacing */background-position:left top;
}

li#infoSR{
	background-image: url(images/info.png);  background-repeat:no-repeat;

    /* width of feed icon plus 2px spacing */background-position:left top; 
}
li#Severity1{
	background-image: url(images/1critical.png);background-repeat:no-repeat;

    /* width of feed icon plus 2px spacing */background-position:left top;
}
li#Severity2{
	background-image: url(images/Red_Flag.png);  background-repeat:no-repeat;

    /* width of feed icon plus 2px spacing */background-position:left top;
}
li#Severity3
	background-image: url(images/3medium.png);background-repeat:no-repeat;

    /* width of feed icon plus 2px spacing */background-position:left top;
}
li#Severity4{
	background-image: url(images/Blue_Flag.png); background-repeat:no-repeat;

    /* width of feed icon plus 2px spacing */background-position:left top;
}

li#referSR{
	background-image: url(images/refer.png);background-repeat:no-repeat;

   /* width of feed icon plus 2px spacing */background-position:left top;
}

/* adding li images */

li#img1 { 
    background: transparent url(images/img1.png);
	background-repeat:no-repeat;
background-position:left top;
}
li#img2 { 
    background: transparent url(images/img2.jpg);
	background-repeat:no-repeat;
background-position:left top;
}
li#img3 { 
    background: transparent url(images/Age.jpg);
	background-repeat:no-repeat;
background-position:left top;
}
li#img4 { 
    background: transparent url(images/img4.bmp);
	background-repeat:no-repeat;
background-position:left top;
}
li#img5 { 
    background: transparent url(images/img5.jpg);
background-repeat:no-repeat;
	background-position:left top;
}
li#img6 { 
    background: transparent url(images/img6.png);
	background-repeat:no-repeat;
background-position:left top;
}
li#prob1 { 
    background: transparent url(images/red_circle.jpg);
	background-repeat:no-repeat;
background-position:left top;
}
li#prob2 { 
    background: transparent url(images/yellow_circle.jpg);
	background-repeat:no-repeat;
background-position:left top;
}
li#prob3 { 
    background: transparent url(images/blue_circle.jpg);
	background-repeat:no-repeat;
background-position:left top;
}
li#prob4 { 
    background: transparent url(images/green_circle.jpg);
	background-repeat:no-repeat;
background-position:left top;
}
.hasTooltip span {
 
	 display: none;
    color: #000;
    text-decoration: none;
    padding: 3px;
   
}

.hasTooltip:hover span {

 display: block;
    position: absolute;
    background-color: #FFF;
    border: 1px solid #CCC;
    margin: 2px 10px;
    
}
   .table
{
background:#ffffff;
 align:left center;
 padding:20px 10px 20px 10px;
width:96%;
}
.table ul:hover{
background-color:#ffff00;
}
.table ul li.title
{

height:25px;
display:inline;
 float:left;
 margin:1px solid #000;
 border:0;
 padding:.2em .2em;
align:left center;
font-weight: bold;
}
.table ul.eachRow li
{
height:25px;
display:inline;
 float:left;
 margin:0;
 padding:.2em .2em;
}

.table ul.eachRow li.icons
{

width:7%;
display:inline;
 float:left;
 margin:0;
 border:0px;
 padding:.2em .1em;
}


.table ul.eachRow li.twrap{
text-overflow: ellipsis; 
overflow: hidden; 
white-space:nowrap; 

}
.table ul.title
{
background-color:#12378B;
color:#fff;
height:30px;
 list-style:none;
 float:left;
 margin:0;
 padding:0;
 width:96%;
 border:1px solid #000;
}
.table ul
{
height:30px;
 list-style:none;
 float:left;
 margin:0;
 padding:0;
 width:96%;
 border:1px solid #000;
}
.table ul.eachRow
{
height:30px;
 list-style:none;
 float:left;
 margin:0;
 padding:0;

}
.table ul li.twrap
{
align:left center;
height:30px;
width:20%;
display:inline;
 float:left;
 margin:0;
 border:0;
 padding:.2em .3em;
}

.gen-button-font{font-size: 1.1em;}

button.gen-button,[type="button"].gen-button,[type="reset"].gen-button,[type="submit"].gen-button,.gen-button{background: #75B7E3;background: -moz-linear-gradient(top,#75B7E3 0%,#5498D6 50%,#408BD0 51%,#387AC8 100%);background: -webkit-gradient(linear,left top,left bottom,color-stop(0%,#75B7E3),color-stop(50%,#5498D6),color-stop(51%,#408BD0),color-stop(100%,#387AC8));background: -o-linear-gradient(top,#75B7E3 0%,#5498D6 50%,#408BD0 51%,#387AC8 100%);color: #fff;text-shadow:0 1px 0 black;border-color: #3169aa;-webkit-box-shadow: inset 0 1px 0 #91d8ef,0 1px 3px rgba(0,0,0,.3);-moz-box-shadow: inset 0 1px 0 #91d8ef,0 1px 3px rgba(0,0,0,.3);}

.gen-button:hover,.gen-button:focus{background: #68A0D2;background: -moz-linear-gradient(top,#68A0D2 0%,#4480BD 50%,#2F70B4 51%,#2660AA 100%);background: -webkit-gradient(linear,left top,left bottom,color-stop(0%,#68A0D2),color-stop(50%,#4480BD),color-stop(51%,#2F70B4),color-stop(100%,#2660AA));background: -o-linear-gradient(top,#68A0D2 0%,#4480BD 50%,#2F70B4 51%,#2660AA 100%);-webkit-box-shadow: inset 0 1px 0 #74b9de,0 1px 3px rgba(0,0,0,.3);-moz-box-shadow: inset 0 1px 0 #74b9de,0 1px 3px rgba(0,0,0,.3);}

button.gen-button[disabled],[type="button"].gen-button[disabled],[type="reset"].gen-button[disabled],[type="submit"].gen-button[disabled] {opacity: 1;background: #FFFFFF;background: -moz-linear-gradient(top,#FFFFFF 0%,#E8E8E8 100%);background: -webkit-gradient(linear,left top,left bottom,color-stop(0%,#FFFFFF),color-stop(100%,#E8E8E8));background: -o-linear-gradient(top,#FFFFFF 0%,#E8E8E8 100%);border: 1px solid #c6c6c6;text-shadow: 0 1px 0 #fff;color: #9a9a9a;}

button[disabled]:hover,button[disabled]:focus,input[type="button"][disabled]:hover,input[type="button"][disabled]:focus,input[type="reset"][disabled]:hover,input[type="reset"][disabled]:focus,input[type="submit"][disabled]:hover,input[type="submit"][disabled]:focus{opacity: 1;background: #FFFFFF;background: -moz-linear-gradient(top,#FFFFFF 0%,#E8E8E8 100%);background: -webkit-gradient(linear,left top,left bottom,color-stop(0%,#FFFFFF),color-stop(100%,#E8E8E8));background: -o-linear-gradient(top,#FFFFFF 0%,#E8E8E8 100%);border: 1px solid #c6c6c6;text-shadow: 0 1px 0 #fff;color: #9a9a9a;}

button.gen-button[disabled]:hover,button.gen-button[disabled]:focus,input.gen-button[type="button"][disabled]:hover,input.gen-button[type="button"][disabled]:focus,input.gen-button[type="reset"][disabled]:hover,input.gen-button[type="reset"][disabled]:focus,input.gen-button[type="submit"][disabled]:hover,input.gen-button[type="submit"][disabled]:focus{opacity: 1;background: #FFFFFF;background: -moz-linear-gradient(top,#FFFFFF 0%,#E8E8E8 100%);background: -webkit-gradient(linear,left top,left bottom,color-stop(0%,#FFFFFF),color-stop(100%,#E8E8E8));background: -o-linear-gradient(top,#FFFFFF 0%,#E8E8E8 100%);border: 1px solid #c6c6c6;text-shadow: 0 1px 0 #fff;color: #9a9a9a;}
html, body { font-family : "Helvetica Neue",Helvetica,Arial,sans-serif; font-size:7.5pt}
div#login-button{margin-bottom: 20px;}

body{font-size:11px;font-family:tahoma;}
#content { padding:5px;width:200px; }
#buttons { padding-left:40px; }


body,div,dl,dt,dd,ul,ol,li,h1,h2,h3,h4,h5,h6,pre,form,fieldset,input,textarea,p,blockquote,th,td{ margin:0; padding:0;}
fieldset,img{ border:0;}
ol,ul{ list-style:none;}
q:before,q:after{ content:'';}
abbr,acronym{ border:0;}

html {
	overflow:-moz-scrollbars-vertical;
}

form.loginFormClass{
	background:#f7f7f7;
	background:-moz-linear-gradient(90deg, #ccc, #fff); /* Firefox */
	background:-webkit-gradient(linear, left top, left bottom, from(#fff), to(#ccc)); /* Webkit */
	border:1px solid #aaa;
	-moz-border-radius:10px;
	-webkit-border-radius:10px;
	-moz-box-shadow:0 0 15px #aaa;
	-webkit-box-shadow:0 0 15px #aaa;
	margin:40px auto 0;
	padding:20px;
	width:300px;
}
h1{
	border-bottom:1px solid #ccc;
	font-size:11px;
	font-weight:bold;
	letter-spacing:2px;
	margin-bottom:20px;
	text-transform:uppercase;
}
form p{
	margin-bottom:20px;
}
form p:last-child{ /* Sélecteur avancé pour sélectionner le dernier paragraphe du formulaire */
	margin-bottom:0;
}
label{
	cursor:pointer;
	display:block;
	float:left;
	font-size:13px;
	font-weight:bold;
	line-height:28px;
	margin-bottom:5px;
	width:120px;
}
form p:hover label{
	color:#0459b7;
}
form p:hover label:after{
	content:" »";
}
input[type=text],
input[type=password],textarea,select{
	background: rgba(255, 255, 255, 0.9);
	background:-moz-linear-gradient(90deg, #fff, #eee); /* Firefox */
	background:-webkit-gradient(linear, left top, left bottom, from(#eee), to(#fff), color-stop(0.2, #fff)); /* Webkit */
	border:1px solid #aaa;
	-moz-border-radius:3px;
	-webkit-border-radius:3px;
	-moz-box-shadow:0 0 3px #aaa;
	-webkit-box-shadow:0 0 3px #aaa;
	padding:5px;
}
input[type=text]:focus,
input[type=password]:focus,
textarea:focus,
select:focus{
	border-color:#093c75;
	-moz-box-shadow:0 0 3px #0459b7;
	-webkit-box-shadow:0 0 3px #0459b7;
	outline:none; /* Pour enlever le contour jaune lorsque l'on sélectionne un input dans Chrome */
}
select.loginForm{
	cursor:pointer;
	padding:3px;
	-moz-box-shadow:0 0 3px #aaa;
	-webkit-box-shadow:0 0 3px #aaa;
}
select.loginForm:active,
select.loginForm:focus{
	border:1px solid #093c75;
	-moz-box-shadow:0 0 3px #0459b7;
	-webkit-box-shadow:0 0 3px #0459b7;
	outline:none;
}

#loginStatus{
	background:rgba(65, 166, 42, 0.2);
	border:2px solid #41a62a;
	-moz-border-radius:3px;
	-webkit-border-radius:3px;
	display:none;
	font-family:Arial,sans-serif;
	font-size:12px;
	padding:5px 10px;
}

/*Reset*/
/* http://meyerweb.com/eric/tools/css/reset/ 
   v2.0 | 20110126
   License: none (public domain)
*/

html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, img, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
b, u, i, center,
dl, dt, dd, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td,
article, aside, canvas, details, embed, 
figure, figcaption, footer, header, hgroup, 
menu, nav, output, ruby, section, summary,
time, mark, audio, video {
 
 vertical-align: baseline;
}
/* HTML5 display-role reset for older browsers */
article, aside, details, figcaption, figure, 
footer, header, hgroup, menu, nav, section {
 display: block;
}
body {
 line-height: 1;
}
ol, ul {
 list-style: none;
}
blockquote, q {
 quotes: none;
}
blockquote:before, blockquote:after,
q:before, q:after {
 content: '';
 content: none;
}
table {
 border-collapse: collapse;
 border-spacing: 0;
}
/*Reset Ends*/

/*Jive style*/



a:link, a:visited { color:#658AC3}
a:hover {text-decoration:none}

/* tables */ /* add to table - table-layout:fixed; */
table.data-grid, table.crud, table.banner {  border:1px solid #222; margin:20px; box-shadow:0 0 5px #888}
table.data-grid {width:90%}
table.data-grid thead tr th, table.crud thead tr th, table.banner thead tr th{ color:white; padding:8px 15px 8px 8px; text-align:left; font-weight:bold}
table.data-grid tbody tr td{ padding:2px; border-top:1px solid #222; cursor:default; text-align:left; overflow: hidden; position:relative;} /* for overflow -- text-overflow:ellipsis; white-space:nowrap; */
table.data-grid tbody tr:hover { background:#FFFF00}
table.data-grid tbody tr.active { background:#FFFF00; color:black}
table.data-grid tbody tr.active a:link, table.data-grid tbody tr.active a:visited { color:#658AC3}
table.crud tbody td { padding:5px; vertical-align:top}
table.crud tbody td.button_row{ 
text-align:center; vertical-align:center; margin: 1em 0; padding:0.3em;}
table.crud thead, table.data-grid thead tr th, table.data-grid tfoot tr th {
	background-color: #12378B;
	border: 1px solid #222;
}

table.data-grid thead tr .header {
	background-image: url(images/bg.png);
	background-repeat: no-repeat;
	background-position: center right;
	cursor: pointer;
}


td.noDiscuss {
	background-image: url(images/discuss_no.png);
}
td.Discuss {
	background-image: url(images/discuss_yes.png);
}

td.updateDays{
	background-image: url(images/updatedays.png);
}

td.updateMins{
	background-image: url(images/updatemins.png);
}

td.infoSR{
	background-image: url(images/info.png);
}

td.Severity1{
	background-image: url(images/1critical.png);
}
td.Severity2{
	background-image: url(images/2high.png);
}
td.Severity3{
	background-image: url(images/3medium.png);
}
td.Severity4{
	background-image: url(images/4low.png);
}

td.referSR{
	background-image: url(images/refer.png);
}

.button
{
	padding-top: 3px;
	padding-bottom: 3px;
	padding-right: 10px;
	padding-left: 10px;
	
	font-size: 9pt;
	font-weight:bold;
	text-decoration: none;
	color: white;
	background-color: #12378B;
	
	text-align: center;
	-moz-border-radius: 8px;
	-webkit-border-radius: 8px;	
}

.button:hover
{
background-color: #658AC3;
}

textarea.referMsg
{
	height:100px;
}
textarea, select { width:300px; padding:5px;}

td.noDiscuss, td.Discuss, td.updateDays, td.updateMins, td.infoSR, td.Severity1, td.Severity2, td.Severity3, td.Severity4, td.referSR
{
	background-repeat: no-repeat;
	background-position: center center;
    position:relative; /*this is the key*/
    z-index:24;
	
	width: 17px;
} /* padding: 2px 3px; */
td.noDiscuss:hover, td.Discuss:hover, td.updateDays:hover, td.updateMins:hover, td.infoSR:hover, td.Severity1:hover, td.Severity2:hover, td.Severity3:hover, td.Severity4:hover, td.referSR
{
	z-index:25;
}
td span {
	display:none;
}

td:hover span {
    display:block;
    position:absolute; top:80px; left:100px; width:150px;
    border:1px solid #FFF;
    background-color:#12378B; color:#FFF;
    text-align: left;
	/* outline radius for mozilla/firefox only */
	-moz-box-shadow:0 0 10px #000;
	-webkit-box-shadow:0 0 10px #000;	
}

a:link, a:visited { color:black}
a:hover {text-decoration:none}

a.viewmore:link, a.viewmore:visited
{
	padding-top: 3px;
	padding-bottom: 3px;
	padding-right: 10px;
	padding-left: 10px;
	
	font-size: 9pt;
	font-weight:bold;
	text-decoration: none;
	color: white;
	background-color: #12378B;
	
	text-align: center;
	-moz-border-radius: 8px;
	-webkit-border-radius: 8px;	
}

a.viewmore:hover
{
background-color: #658AC3;
}

#footer{
	clear: both;
	height: 28px;
	width: 100%;
	border-width: 1px 0 0 0;
	border-style: solid;
	border-color: #658AC3;
	vertical-align: middle;
	padding: 0;
	margin: 0;
	position: absolute;
	bottom: 0px;
	font-size: 9px;
	font-weight: bold;
	text-align:center;
	font-family: Verdana, Geneva, Arial, sans-serif
} 

/* Jive Style ends */

/*New Home */
* {
  margin: 0;
  padding: 0
}

.container {
  background-color: #12378B;
  width: 380px;
  border: 1px solid #000;
}

* html .container {
  width: 383px;
}

.header {
  width: 100%;
  border-bottom: 1px solid #000;
}

.header ul {
  list-style: none
}

.header ul li {
  width: 90px;
  border-left: 1px solid #000;
  float: left;
  font-weight: bold;
  padding-left: 2px;
}

* html .header ul li {
  width: 93px;
}

.data {
  width: 90px;
  overflow:hidden;
  text-overflow:ellipsis; 
  white-space:nowrap;
  float: left;
  padding-left: 2px;
}

* html .data {
  width: 93px;
}

.rowodd,.roweven {
  position: relative;
  width: 380px;
  border-top: 1px solid #000;
  background-color: #E8E8E8;
}

.roweven {
  background-color: #D1DCE9;
}

.clearfix:after {
  content: ".";
  display: block;
  height: 0;
  clear: both;
  visibility: hidden;
}

.clearfix {
  display: inline-block;
}
/*New Home Ends */

.loadmask {
    z-index: 100;
    position: absolute;
    top:0;
    left:0;
    -moz-opacity: 0.5;
    opacity: .50;
    filter: alpha(opacity=50);
    background-color: #CCC;
    width: 100%;
    height: 100%;
    zoom: 1;
}
.loadmask-msg {
    z-index: 20001;
    position: absolute;
    top: 0;
    left: 0;
    border:1px solid #6593cf;
    background: #c3daf9;
    padding:2px;
}
.loadmask-msg div {
    padding:5px 10px 5px 25px;
    background: #fbfbfb url('../images/loading.gif') no-repeat 5px 5px;
    line-height: 16px;
	border:1px solid #a3bad9;
    color:#222;
    font:normal 11px tahoma, arial, helvetica, sans-serif;
    cursor:wait;
}
.masked {
    overflow: hidden !important;
}
.masked-relative {
    position: relative !important;
}
.masked-hidden {
    visibility: hidden !important;
}
</style>

<link rel="stylesheet" type="text/css" href="stylesheets/formulaire-css3.css" media="screen" title="bbxcss" />

<title>My Siebel Service Requests - Home</title>
</head>
<body id="loadMask">
<div id="LoginScreen" style="display:none">
<form class="loginFormClass" id="loginForm" name="loginForm">
	<h1>Login - Siebel</h1>
	<p>
		<label for="uname">Username</label>
		<input id="uname" name="uname" type="text" />
	</p>
	<p>
		<label for="pword">Password</label>
		<input id="pword" name="pword" type="password" />
	</p>

	<div id="login-button" class="clearfix">
		<input id="loginSiebel" class="gen-button-font gen-button" type="button" name="login" value="Log in"/>
	</div>
	
	<div id="loginStatus"> </div>
</form>
</div>
<div id="HomeView" style="display:none">

<div class="chromestyle" id="chromemenu">
		<ul>
			<li>Welcome, <a href="#" id ="myID" rel="dropmenu1"></a></li>
		</ul>
	</div>
													  
	<div id="dropmenu1" class="dropmenudiv">
		<!-- <a href="" id="changePref">Change Preferences</a> -->
		<a href="" id="logOut">Logout</a>
	</div>
	
  <table id="xmlTable" class="data-grid">
    <thead>
      <tr>
		<th>Account</th>
		<th>Group</th>
		<th>Category</th>		
		<th colspan="5">Info</th>
      </tr>
    </thead>
    <tbody>
      <!-- Placeholder for the fetched records to be displayed -->
    </tbody>
  </table>
   <!-- <div align="center"><a onclick="gadgets.views.requestNavigateTo('canvas');return false;" href="#canvas" class="viewmore" title="Click to open detail canvas view.">View Detail Canvas</a></div> -->
</div>

<table class="crud" id="ReferPage" width="90%" style="display:none">
	<thead>
	  <tr>
		<th colspan="2">Refer Service Request to a Colleague</th>
	  </tr>
	</thead>
	<tbody>
		<tr><td>To</td><td> <select id="referList"></select></td></tr>
		<tr><td>Subject</td><td><input type="text" id="referSub"/></td></tr>
		<tr><td>Message</td><td><textarea id="referMsg" rows="5"></textarea></td></tr>
		<tr><td class="button_row" colspan="2"><button id="postMsg">Post Message</button><span>  </span><button id="cancelMsg">Cancel</button>
		</td>
		</tr>
	</tbody>
</table>

<div id="footer">&copy; Accenture 2011</div> 

  <script type="text/javascript" src="javascripts/jquery.min.js"></script>
  <script type="text/javascript" src="javascripts/jquery.tablesorter.min.js"></script> <!--Should be removed once Siebel is set up to send SRs sorted by Updated Date-->
  <script type="text/javascript" src="javascripts/jquery.xml2json.js"></script>
  <script type="text/javascript" src="javascripts/chrome.js"></script>
  <script type="text/javascript" src="javascripts/home.js"></script>
  <script type="text/javascript" src="javascripts/jquery.loadmask.js"></script>
  <script type="text/javascript">
	gadgets.util.registerOnLoadHandler(init);
	var viewer;
	var srNumberRefer = "";
 	function init() {
		registerEvents();
		viewer = opensocial.data.getDataContext().getDataSet('viewer');
	};
	function registerEvents() {
		var groupID = "@friends";
		//console.log("Selecting people for groupID '" + groupID + "'");
		osapi.people.get({
		userId : '@me',
		groupId : groupID,
		fields : 'id,name,thumbnail_url,jive_enabled'
		}).execute(function(response) {
			//console.log("Select response is " + JSON.stringify(response));
			var html = "";
			if (response.list) {
				$.each(response.list, function(index, user) {
					if (user.jive_enabled) {html += "<option value=\""+user.id+"\">" + user.displayName + "</option>";}
				});
			}
			else {
				var user = response;
				if (user.jive_enabled) { html += "<option value=\""+user.id+"\">" + user.displayName + "</option>"; }
			}
			$("#referList").html("").html(html);
		});
	};	
    function newPost(){
	//var tr = $(this).closest('tr'), id = tr[0].id;
			var PostID=$('#referList').val();
			var Msg = $('#referMsg').val();
			var subject = $('#referSub').val();
			var msg = new gadgets.MiniMessage();
			//console.log("Posting to:"+PostID)
	  		  var params = {
		      "userId":"@viewer",
		      "activity":{
		          "title":"Notification (Siebel SRs)",
		          "body":"{@actor} referred to {@target} about \""+subject+"\"",
		          "verb":["POST"],
		          "object":{
						"id":"badge/103",
						"summary":"<b>"+subject+"</b><br/>"+Msg,
						"title":"Subject:"+subject,
						"objectType":"badge"
		          },
		          "target":{"id":"urn:jiveObject:user/"+PostID}        
		       },
		       "groupId":"@self"
		    }
			osapi.activities.create(params).execute(function(response) {
				if (!response.error) {	
					msg.createTimerMessage("<div style='text-align:center;'>Notification posted successfully.</div>", 4);
					$('#HomeView').show();
					$('#ReferPage').hide();
					$('#referMsg').val("");
					$('#referSub').val("");	
					}
				else {
					msg.createTimerMessage("<div style='text-align:center;'>Unable to post. Please try again. <br />Error: <i>"+response.error.message+"</i> </div>", 4);
					}
				});
	};
	
	function cancelPost() {
			$('#referMsg').val("");
			$('#referSub').val("");
			$('#HomeView').show();
			$('#ReferPage').hide();	
	};
  $(document).ready(function () {
	
	//$('#HomeView').show();
	$('#ReferPage').hide();
	init();
	var xmlDoc = '';	
	osapi.jive.core.users.get({id: '@viewer'}).execute(function(response) {
		if (!response.error) {
			var jiveUser = response.data;
			var idUser = jiveUser.username;
			var idUserSiebel=idUser.toUpperCase(); //Siebel currently allows only names in uppercase!
			var DateImage = "images/updatedays.png";
			var xmlInput = '<?xml version="1.0" encoding="UTF-8"?><soapenv:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:tro="http://siebel.com/TroubleTicket" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/"><soapenv:Header/><soapenv:Body><tro:GetTroubleTicket soapenv:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"><SiebelMessage xsi:type="ws:ListOfWsTroubleTicketInterfaceTopElmt" xmlns:ws="http://www.siebel.com/xml/WS Trouble Ticket"><ListOfWsTroubleTicketInterface xsi:type="ws:ListOfWsTroubleTicketInterface"><TroubleTicket xsi:type="ws:ArrayOfTroubleTicket" soapenc:arrayType="ws:TroubleTicket[]"/><ws:TroubleTicket><ws:Owner>'+idUserSiebel+'</ws:Owner><ws:Status>Open</ws:Status></ws:TroubleTicket></ListOfWsTroubleTicketInterface></SiebelMessage></tro:GetTroubleTicket></soapenv:Body></soapenv:Envelope>'; // Normal XML text, not URI encoded
		osapi.jive.connects.get({
		  'alias' : 'accenture',
		  'format' : 'text',
		  'headers' : { 'Content-Type' : ['application/xml;charset=utf-8'], 'Accept-Language' : ['en-us']},
		  'params' : { 'SWEExtData' : xmlInput } // Jive Connects will URI encode values for you
		}).execute(function(response) {
			if (!response.error) {
						xmlDoc = response.content;
						var json = $.xml2json(xmlDoc);
						try 
						{
							var myXML = xmlDoc;
							var xmlDoc = $.parseXML(myXML);
							var dummyParent = '';
							$myXML = $(xmlDoc);
							$dummyParent = $myXML.find('TroubleTicket');
							$returnSR = $dummyParent.find('TroubleTicket');
							var srNumber, srType, pCat, pGroup, Account, Status, Desc, openDate, upDate, srDisc, Disc, row, severity = '';
							var j=0;
							$returnSR.each(function () {
									if(j<15)
									{
										srNumber = ($(this).children('TicketID').text());
										Desc = ($(this).children('Abstract').text());
										Status = ($(this).children('Status').text());

										Account = ($(this).children('Account').text());
										upDate = ($(this).children('LastUpdated').text());
										Disc = ($(this).children('AgentComments').text());
										pGroup = ($(this).children('Area').text());
										pCat = ($(this).children('Sub-Area').text());
										severity = ($(this).children('Severity').text());
										
										upDate = DateFormatFunc(upDate);
										if (upDate.search(/day/i) != -1)
										{
											upDate ='<td class="updateDays"><span>Updated '+upDate+'</span></td>'; //Image for Days ago
										}
										else if (upDate.search(/hour/i) != -1)
										{
											upDate ='<td class="updateMins"><span>Updated '+upDate+'</span></td>'; //Image for Hours ago
										}
										else
										{
											upDate ='<td class="updateMins"><span>Updated '+upDate+'</span></td>'; //Image for Minutes/Seconds ago
										}
										//console.log(j+":"+upDate);
										if (Disc=='')
										{
										srDisc = '<td class="noDiscuss"><span>No Discussion Exists</span></td>'; //Discussion absent image									
										}
										else
										{
										srDisc = '<td class="Discuss" onclick="window.open(\''+Disc+'\')" style="cursor:hand;"><span>Discussion Exists. Click on icon to open.</span></td>'; //Discussion present image
										}

										if (severity == '1-Critical')
										{
										severity = '<td class="Severity1"><span>Severity: '+severity+'</span></td>';
										}
										else if (severity == '2-High')
										{
										severity = '<td class="Severity2"><span>Severity: '+severity+'</span></td>';
										}
										else if (severity == '3-Medium')
										{
										severity = '<td class="Severity3"><span>Severity: '+severity+'</span></td>';
										}
										else
										{
										severity = '<td class="Severity4"><span>Severity: '+severity+'</span></td>';
										}
										
										var infoSR = '<td class="infoSR"><span>SR Number: '+srNumber+' | Status: '+Status+' | Short Description: '+Desc+'</span></td>';
										
										//onclick="javascript:referSRTo('+srNumber+');"
										var refer = '<td class="referSR"><span>Refer this SR to a colleague</span></td>';
										
										//If there is any special character coming from Siebel, retain it - avoid JavaScript from performing Mathematical operations and like
										for (i=0;i<=(srNumber.length-1);i++)
										{
											srNumber.charCodeAt(i);
										}							
										row = row + 
												'<tr id="'+srNumber+'">' + '<td>' + Account + '</td>' + '<td>' + pGroup + '</td>' +
												'<td>' + pCat + '</td>' + infoSR  + upDate + severity +	srDisc + refer +'</tr>';
										j++;
									}											
							});		
							$("table#xmlTable tbody").append(row);
						} catch (err) {
							$("table#xmlTable tbody").append('<tr align="center"><td colspan="8">Unable to fetch records now.</td></tr>');
						}
						}
						else
						{
							if (response.error.message === 'Connection reset')
							{
							window.location.reload();
							}
							else
							{
							$("table#xmlTable tbody").append('<tr align="center"><td colspan="8">Unable to fetch records now. Error:'+response.error.message+'</td></tr>');
							}
						}	
				});
		}
		else
		{
		idUser = "JIVEUSER";
		}
	});
	//Refer - Submit
	$('button#postMsg').live('click', function(){
			var PostID=$('#referList').val();
			var Msg = $('#referMsg').val();
			var subject = $('#referSub').val();
			var msg = new gadgets.MiniMessage();
			//console.log("Posting to:"+PostID)
	  		  var params = {
		      "userId":"@viewer",
		      "activity":{
		          "title":"Notification (Siebel SRs)",
		          "body":"{@actor} referred to {@target} about \"Service Request# "+srNumberRefer+"\"",
		          "verb":["POST"],
		          "object":{
						"id":"badge/103",
						"summary":"<b>"+subject+"</b><br/>"+Msg,
						"title":"Subject:"+subject,
						"objectType":"badge"
		          },
		          "target":{"id":"urn:jiveObject:user/"+PostID}        
		       },
		       "groupId":"@self"
		    }
			osapi.activities.create(params).execute(function(response) {
				if (!response.error) {	
					msg.createTimerMessage("<div style='text-align:center;'>Notification posted successfully.</div>", 4);
					$('#HomeView').show();
					$('#ReferPage').hide();
					$('#referMsg').val("");
					$('#referSub').val("");	
					}
				else {
					msg.createTimerMessage("<div style='text-align:center;'>Unable to post. Please try again. <br/>Error: <i>"+response.error.message+"</i> </div>", 4);
					}
				});
	});

	//Cancel Message - Refer
	$('button#cancelMsg').live('click', function(){	
			$('#referMsg').val("");
			$('#referSub').val("");
			$('#HomeView').show();
			$('#ReferPage').hide();				
	});	
	function DateFormatFunc(InputDate)
	{
		var DtFmt = new Date(InputDate.substring(6,10),InputDate.substring(0,2)-1,InputDate.substring(3,5),InputDate.substring(11,13),InputDate.substring(14,16),InputDate.substring(17,19)).valueOf();
		var d = new Date();
		var DtCurr = new Date(d.getFullYear(),d.getMonth(),d.getDate(),d.getHours(),d.getMinutes(),d.getSeconds()).valueOf();
		var timediff = Math.abs(DtCurr - DtFmt);
		var days = Math.floor(timediff / (1000 * 60 * 60 * 24)); 
		timediff -= days * (1000 * 60 * 60 * 24);
		var hours = Math.floor(timediff / (1000 * 60 * 60)); 
		timediff -= hours * (1000 * 60 * 60);
		hours = hours - 12; //as it is IST now.
		var mins = Math.floor(timediff / (1000 * 60)); 
		timediff -= mins * (1000 * 60);
		mins = mins - 30; //IST correction
		var secs = Math.floor(timediff / 1000); 
		timediff -= secs * 1000;
		var dtfmtDate = days +":" + hours +":"+mins +":"+secs
		if (days > 0)
		{
			if (days == 1)
			{ return "1 day ago";}
			else
			{ return days+" days ago"; }
		}
		else if (days === 0)
		{
			if (hours > 0)
			{	
				if (hours == 1)
				{return "1 hour ago";}
				else
				{return hours+" hours ago"; }
			}
			else if (mins > 0)
			{	
				if (mins == 1)
				{ return "1 min ago"; }
				else
				{return mins+" mins ago"; }
			}
			else
			{	return secs+" secs ago"; }
		}
		return (dtfmtDate);
	};
	
	$("td.referSR").live('click', function(){
	var tr = $(this).closest('tr'), id = tr[0].id;
	srNumberRefer = id;
	//console.log("ID:"+id);
	if($('#referList').val()=="")
	{ init();}
		$('#HomeView').hide();
		$('#ReferPage').show();	
	});
});

</script>
</body>
</html>